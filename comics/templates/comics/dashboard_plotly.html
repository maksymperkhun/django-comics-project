
<!--<!DOCTYPE html>-->
<!--<html lang="uk">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>Plotly Dashboard</title>-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--</head>-->
<!--<body class="container mt-4">-->
<!--    <div class="d-flex justify-content-between align-items-center mb-4">-->
<!--        <h1>üìä Plotly –î–∞—à–±–æ—Ä–¥</h1>-->
<!--        <a href="/dashboard/bokeh/" class="btn btn-outline-primary">–ü–µ—Ä–µ–π—Ç–∏ –¥–æ Bokeh ‚Üí</a>-->
<!--    </div>-->

<!--    <form method="get" id="filterForm">-->
<!--        <div class="row mb-4">-->

<!--            <div class="col-md-4">-->
<!--                <div class="card h-100 border-primary">-->
<!--                    <div class="card-header bg-primary text-white">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ì—Ä–∞—Ñ—ñ–∫–∞ ‚Ññ1</div>-->
<!--                    <div class="card-body bg-light">-->
<!--                        <label class="form-label fw-bold">–ú—ñ–Ω. –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–Ω–∏–≥ –Ω–∞ —Å–∫–ª–∞–¥—ñ:-->
<!--                            <span id="stockVal" class="badge bg-primary">{{ filters.min_stock }}</span>-->
<!--                        </label>-->
<!--                        <input type="range" class="form-range" name="min_stock"-->
<!--                               min="0" max="100" step="1" value="{{ filters.min_stock }}"-->
<!--                               oninput="document.getElementById('stockVal').innerText = this.value">-->
<!--                        <small class="text-muted">–§—ñ–ª—å—Ç—Ä—É—î –≤–∏–¥–∞–≤–Ω–∏—Ü—Ç–≤–∞, —É —è–∫–∏—Ö –º–µ–Ω—à–µ –∫–Ω–∏–≥.</small>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->

<!--            <div class="col-md-8">-->
<!--                <div class="card h-100 border-success">-->
<!--                    <div class="card-header bg-success text-white">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ì—Ä–∞—Ñ—ñ–∫–∞ ‚Ññ2</div>-->
<!--                    <div class="card-body bg-light">-->
<!--                        <div class="row g-3">-->
<!--                            <div class="col-md-6 border-end">-->
<!--                                <label class="form-label fw-bold text-center w-100">-->
<!--                                    –î—ñ–∞–ø–∞–∑–æ–Ω –†–µ–π—Ç–∏–Ω–≥—É:-->
<!--                                    <span class="badge bg-success">{{ filters.min_rating }}</span> - -->
<!--                                    <span class="badge bg-success">{{ filters.max_rating }}</span>-->
<!--                                </label>-->

<!--                                <div class="d-flex align-items-center">-->
<!--                                    <span class="me-2">Min</span>-->
<!--                                    <input type="range" class="form-range" name="min_rating"-->
<!--                                           min="0" max="5" step="0.01" value="{{ filters.min_rating }}">-->
<!--                                </div>-->
<!--                                <div class="d-flex align-items-center mt-2">-->
<!--                                    <span class="me-2">Max</span>-->
<!--                                    <input type="range" class="form-range" name="max_rating"-->
<!--                                           min="0" max="5" step="0.01" value="{{ filters.max_rating }}">-->
<!--                                </div>-->
<!--                            </div>-->

<!--                            <div class="col-md-6">-->
<!--                                <label for="sort_by" class="form-label fw-bold">–°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –∞–≤—Ç–æ—Ä—ñ–≤:</label>-->
<!--                                <select class="form-select" name="sort_by">-->
<!--                                    <option value="rating_desc" {% if filters.sort_by == 'rating_desc' %}selected{% endif %}>-->
<!--                                        –°–ø–æ—á–∞—Ç–∫—É –≤–∏—Å–æ–∫–∏–π —Ä–µ–π—Ç–∏–Ω–≥-->
<!--                                    </option>-->
<!--                                    <option value="rating_asc" {% if filters.sort_by == 'rating_asc' %}selected{% endif %}>-->
<!--                                        –°–ø–æ—á–∞—Ç–∫—É –Ω–∏–∑—å–∫–∏–π —Ä–µ–π—Ç–∏–Ω–≥-->
<!--                                    </option>-->
<!--                                    <option value="name" {% if filters.sort_by == 'name' %}selected{% endif %}>-->
<!--                                        üî§ –ó–∞ –∞–ª—Ñ–∞–≤—ñ—Ç–æ–º (A-Z)-->
<!--                                    </option>-->
<!--                                </select>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->

<!--        </div>-->
<!--    </form>-->

<!--    <div class="row">-->
<!--        {% for chart in charts %}-->
<!--            <div class="col-md-12 mb-5">-->
<!--                <div class="card shadow">-->
<!--                    <div class="card-body p-1">-->
<!--                        {{ chart|safe }}-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        {% endfor %}-->
<!--    </div>-->

<!--    <script>-->
<!--        const form = document.getElementById('filterForm');-->

<!--        form.querySelectorAll('input[type="range"], select').forEach(el => {-->
<!--            el.addEventListener('change', () => {-->

<!--                const minInput = form.querySelector('input[name="min_rating"]');-->
<!--                const maxInput = form.querySelector('input[name="max_rating"]');-->

<!--                if (parseFloat(minInput.value) > parseFloat(maxInput.value)) {-->
<!--                    let temp = minInput.value;-->
<!--                    minInput.value = maxInput.value;-->
<!--                    maxInput.value = temp;-->
<!--                }-->

<!--                form.submit();-->
<!--            });-->
<!--        });-->
<!--    </script>-->
<!--</body>-->
<!--</html>-->



<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Plotly Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>Plotly –î–∞—à–±–æ—Ä–¥</h1>
        <a href="/dashboard/bokeh/" class="btn btn-outline-primary">–ü–µ—Ä–µ–π—Ç–∏ –¥–æ Bokeh ‚Üí</a>
    </div>

    <form method="get" id="filterForm">
        <div class="row mb-4">

            <div class="col-md-5"> <div class="card h-100 border-primary">
                    <div class="card-header bg-primary text-white">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ì—Ä–∞—Ñ—ñ–∫–∞ ‚Ññ1</div>
                    <div class="card-body bg-light">

                        <div class="mb-3">
                            <label class="form-label fw-bold">–ú—ñ–Ω. –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–Ω–∏–≥:
                                <span id="stockVal" class="badge bg-primary">{{ filters.min_stock }}</span>
                            </label>
                            <input type="range" class="form-range" name="min_stock"
                                   min="0" max="100000" step="1" value="{{ filters.min_stock }}"
                                   oninput="document.getElementById('stockVal').innerText = this.value">
                        </div>

                        <div class="mb-0">
                            <label for="sort_by" class="form-label fw-bold">–°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è:</label>
                            <select class="form-select" name="sort_by">
                                <option value="stock_desc" {% if filters.sort_by == 'stock_desc' %}selected{% endif %}>
                                    –ó–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—é (–°–ø–∞–¥–∞–Ω–Ω—è)
                                </option>
                                <option value="stock_asc" {% if filters.sort_by == 'stock_asc' %}selected{% endif %}>
                                    –ó–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—é (–ó—Ä–æ—Å—Ç–∞–Ω–Ω—è)
                                </option>
                                <option value="name" {% if filters.sort_by == 'name' %}selected{% endif %}>
                                    –ó–∞ –Ω–∞–∑–≤–æ—é (A-Z)
                                </option>
                            </select>
                        </div>

                    </div>
                </div>
            </div>

            <div class="col-md-7">
                <div class="card h-100 border-success">
                    <div class="card-header bg-success text-white">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ì—Ä–∞—Ñ—ñ–∫–∞ ‚Ññ2</div>
                    <div class="card-body bg-light d-flex flex-column justify-content-center">

                        <label class="form-label fw-bold text-center w-100 mb-3">
                            –î—ñ–∞–ø–∞–∑–æ–Ω –†–µ–π—Ç–∏–Ω–≥—É:
                            <span class="badge bg-success">{{ filters.min_rating }}</span> -
                            <span class="badge bg-success">{{ filters.max_rating }}</span>
                        </label>

                        <div class="row align-items-center">
                            <div class="col-2 text-end">Min</div>
                            <div class="col-10">
                                <input type="range" class="form-range" name="min_rating"
                                       min="0" max="10" step="0.5" value="{{ filters.min_rating }}">
                            </div>
                        </div>

                        <div class="row align-items-center mt-3">
                            <div class="col-2 text-end">Max</div>
                            <div class="col-10">
                                <input type="range" class="form-range" name="max_rating"
                                       min="0" max="10" step="0.5" value="{{ filters.max_rating }}">
                            </div>
                        </div>

                    </div>
                </div>
            </div>

        </div>
    </form>

    <div class="row">
        {% for chart in charts %}
            <div class="col-md-12 mb-5">
                <div class="card shadow">
                    <div class="card-body p-1">
                        {{ chart|safe }}
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>

    <script>
        const form = document.getElementById('filterForm');
        form.querySelectorAll('input[type="range"], select').forEach(el => {
            el.addEventListener('change', () => {
                const minInput = form.querySelector('input[name="min_rating"]');
                const maxInput = form.querySelector('input[name="max_rating"]');
                if (parseFloat(minInput.value) > parseFloat(maxInput.value)) {
                    let temp = minInput.value; minInput.value = maxInput.value; maxInput.value = temp;
                }
                form.submit();
            });
        });
    </script>
</body>
</html>